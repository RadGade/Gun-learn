!function(t){var n={};function e(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:o})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(o,i,function(n){return t[n]}.bind(null,i));return o},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=2)}([function(t,n){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch(t){"object"==typeof window&&(e=window)}t.exports=e},function(t,n,e){t.exports=e(3)},function(t,n,e){t.exports=e(10)},function(t,n,e){(function(t,n,o){!function(){var i;"undefined"!=typeof window&&(i=window),void 0!==t&&(i=t);var r=(i=i||{}).console||{log:function(){}};function a(t,n){return n?e(8)(t):t.slice?a[o(t)]:function(n,e){t(n={exports:{}}),a[o(e)]=n.exports};function o(t){return t.split("/").slice(-1).toString().replace(".js","")}}var u=n;a((function(t){var n={fn:{is:function(t){return!!t&&"function"==typeof t}}};n.bi={is:function(t){return t instanceof Boolean||"boolean"==typeof t}},n.num={is:function(t){return!o(t)&&(t-parseFloat(t)+1>=0||1/0===t||-1/0===t)}},n.text={is:function(t){return"string"==typeof t}},n.text.ify=function(t){return n.text.is(t)?t:"undefined"!=typeof JSON?JSON.stringify(t):t&&t.toString?t.toString():t},n.text.random=function(t,n){var e="";for(t=t||24,n=n||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";t>0;)e+=n.charAt(Math.floor(Math.random()*n.length)),t--;return e},n.text.match=function(t,n){var e,o;return"string"==typeof t&&("string"==typeof n&&(n={"=":n}),t===(e=(n=n||{})["="]||n["*"]||n[">"]||n["<"])||o===n["="]&&(e=n["*"]||n[">"]||n["<"],t.slice(0,(e||"").length)===e||o===n["*"]&&(o!==n[">"]&&o!==n["<"]?t>=n[">"]&&t<=n["<"]:o!==n[">"]&&t>=n[">"]||o!==n["<"]&&t<=n["<"])))},n.list={is:function(t){return t instanceof Array}},n.list.slit=Array.prototype.slice,n.list.sort=function(t){return function(n,e){return n&&e?(n=n[t])<(e=e[t])?-1:n>e?1:0:0}},n.list.map=function(t,n,e){return u(t,n,e)},n.list.index=1,n.obj={is:function(t){return!!t&&(t instanceof Object&&t.constructor===Object||"Object"===Object.prototype.toString.call(t).match(/^\[object (\w+)\]$/)[1])}},n.obj.put=function(t,n,e){return(t||{})[n]=e,t},n.obj.has=function(t,n){return t&&Object.prototype.hasOwnProperty.call(t,n)},n.obj.del=function(t,n){if(t)return t[n]=null,delete t[n],t},n.obj.as=function(t,n,e,o){return t[n]=t[n]||(o===e?{}:e)},n.obj.ify=function(t){if(r(t))return t;try{t=JSON.parse(t)}catch(n){t={}}return t},function(){function t(t,n){a(this,n)&&void 0!==this[n]||(this[n]=t)}n.obj.to=function(n,e){return u(n,t,e=e||{}),e}}(),n.obj.copy=function(t){return t?JSON.parse(JSON.stringify(t)):t},function(){function t(t,n){var e=this.n;if(!e||!(n===e||r(e)&&a(e,n)))return!!n||void 0}n.obj.empty=function(n,e){return!n||!u(n,t,{n:e})}}(),function(){function t(n,e){if(2===arguments.length)return t.r=t.r||{},void(t.r[n]=e);t.r=t.r||[],t.r.push(n)}var i,u=Object.keys;Object.keys=Object.keys||function(t){return i(t,(function(t,n,e){e(n)}))},n.obj.map=i=function(i,s,c){var f,l,p,d,h,g=0,m=e(s);if(t.r=null,u&&r(i)&&(d=u(i),h=!0),o(i)||d)for(l=(d||i).length;g<l;g++){var v=g+n.list.index;if(m){if((p=h?s.call(c||this,i[d[g]],d[g],t):s.call(c||this,i[g],v,t))!==f)return p}else if(s===i[h?d[g]:g])return d?d[g]:v}else for(g in i)if(m){if(a(i,g)&&(p=c?s.call(c,i[g],g,t):s(i[g],g,t))!==f)return p}else if(s===i[g])return g;return m?t.r:n.list.index?0:-1}}(),n.time={},n.time.is=function(t){return t?t instanceof Date:+(new Date).getTime()};var e=n.fn.is,o=n.list.is,i=n.obj,r=i.is,a=i.has,u=i.map;t.exports=n}))(a,"./type"),a((function(t){t.exports=function t(n,e,o){if(!n)return{to:t};n=(this.tag||(this.tag={}))[n]||(this.tag[n]={tag:n,to:t._={next:function(t){var n;(n=this.to)&&n.next(t)}}});if(e instanceof Function){var i={off:t.off||(t.off=function(){if(this.next===t._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=t._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:t._,next:e,the:n,on:this,as:o};return(i.back=n.last||n).to=i,n.last=i}return(n=n.to)&&void 0!==e&&n.next(e),n}}))(a,"./onto"),a((function(t){if("undefined"==typeof JSON)throw new Error("JSON is not included in this browser. Please load it first: ajax.cdnjs.com/ajax/libs/json2/20110223/json2.js");var n=JSON.stringify;t.exports=function(t,e,o,i,r){if(t<e)return{defer:!0};if(e<o)return{historical:!0};if(o<e)return{converge:!0,incoming:!0};if(e===o){if((i=n(i)||"")===(r=n(r)||""))return{state:!0};if(i<r)return{converge:!0,current:!0};if(r<i)return{converge:!0,incoming:!0}}return{err:"Invalid CRDT Data: "+i+" to "+r+" at "+e+" to "+o+"!"}}}))(a,"./HAM"),a((function(t){var n=a("./type"),e={is:function(t){return void 0!==t&&(null===t||t!==1/0&&(!!(u(t)||i(t)||r(t))||(e.link.is(t)||!1)))}};e.link=e.rel={_:"#"},function(){function t(t,n){var e=this;return e.id?e.id=!1:n==o&&u(t)?void(e.id=t):e.id=!1}e.link.is=function(n){if(n&&n[o]&&!n._&&c(n)){var e={};if(l(n,t,e),e.id)return e.id}return!1}}(),e.link.ify=function(t){return f({},o,t)},n.obj.has._=".";var o=e.link._,i=n.bi.is,r=n.num.is,u=n.text.is,s=n.obj,c=s.is,f=s.put,l=s.map;t.exports=e}))(a,"./val"),a((function(t){var n=a("./type"),e=a("./val"),o={_:"_",soul:function(t,n){return t&&t._&&t._[n||f]}};o.soul.ify=function(t,n){return n="string"==typeof n?{soul:n}:n||{},(t=t||{})._=t._||{},t._[f]=n.soul||t._[f]||c(),t},o.soul._=e.link._,function(){function t(t,n){if(n!==o._)return!e.is(t)||void(this.cb&&this.cb.call(this.as,t,n,this.n,this.s))}o.is=function(n,e,i){var a;return!!r(n)&&(!!(a=o.soul(n))&&!s(n,t,{as:i,cb:e,s:a,n:n}))}}(),function(){function t(t,n){var o,i=this.o;i.map?void 0===(o=i.map.call(this.as,t,""+n,i.node))?u(i.node,n):i.node&&(i.node[n]=o):e.is(t)&&(i.node[n]=t)}o.ify=function(n,e,i){return e?"string"==typeof e?e={soul:e}:e instanceof Function&&(e={map:e}):e={},e.map&&(e.node=e.map.call(i,n,void 0,e.node||{})),(e.node=o.soul.ify(e.node||{},e))&&s(n,t,{o:e,as:i}),e.node}}();var i=n.obj,r=i.is,u=i.del,s=i.map,c=n.text.random,f=o.soul._;t.exports=o}))(a,"./node"),a((function(t){var n=a("./type"),e=a("./node");function o(){var t;return t=i(),r<t?(u=0,r=t+o.drift):r=t+(u+=1)/s+o.drift}var i=n.time.is,r=-1/0,u=0,s=1e3,c="undefined"!=typeof performance&&(performance.timing&&performance);c&&c.timing&&c.timing.navigationStart||(c=!1);o._=">",o.drift=0,o.is=function(t,n,e){var i=n&&t&&t[b]&&t[b][o._]||e;if(i)return v(i=i[n])?i:-1/0},o.lex=function(){return o().toString(36).replace(".","")},o.ify=function(t,n,i,r,a){if(!t||!t[b]){if(!a)return;t=e.soul.ify(t,a)}var u=p(t[b],o._);return f!==n&&n!==b&&(v(i)&&(u[n]=i),f!==r&&(t[n]=r)),t},o.to=function(t,n,i){var r=(t||{})[n];return h(r)&&(r=m(r)),o.ify(i,n,o.is(t,n),r,e.soul(t))},function(){function t(t,n){b!==n&&o.ify(this.o,n,this.s)}o.map=function(n,e,i){var r,a=h(a=n||e)?a:null;return n=y(n=n||e)?n:null,a&&!n?(e=v(e)?e:o(),a[b]=a[b]||{},g(a,t,{o:a,s:e}),a):(i=i||h(e)?e:r,e=v(e)?e:o(),function(o,a,u,s){if(!n)return t.call({o:u,s:e},o,a),o;n.call(i||this||{},o,a,u,s),d(u,a)&&r===u[a]||t.call({o:u,s:e},o,a)})}}();var f,l=n.obj,p=l.as,d=l.has,h=l.is,g=l.map,m=l.copy,v=n.num.is,y=n.fn.is,b=e._;t.exports=o}))(a,"./state"),a((function(t){var n=a("./type"),e=a("./val"),o=a("./node"),i={};!function(){function t(t,e){if(!t||e!==o.soul(t)||!o.is(t,this.fn,this.as))return!0;this.cb&&(n.n=t,n.as=this.as,this.cb.call(n.as,t,e,n))}function n(t){t&&o.is(n.n,t,n.as)}i.is=function(n,e,o,i){return!(!n||!u(n)||f(n))&&!p(n,t,{cb:e,fn:o,as:i})}}(),function(){function t(t,n){var i;return(i=function(t,n){var e,o=t.seen,i=o.length;for(;i--;)if(e=o[i],n.obj===e.obj)return e;o.push(n)}(t,n))?i:(n.env=t,n.soul=a,o.ify(n.obj,r,n)&&(n.link=n.link||e.link.ify(o.soul(n.node)),n.obj!==t.shell&&(t.graph[e.link.is(n.link)]=n.node)),n)}function r(n,i,r){var a,u,l=this,p=l.env;if(o._===i&&c(n,e.link._))return r._;if(a=f(n,i,r,l,p)){if(i||(l.node=l.node||r||{},c(n,o._)&&o.soul(n)&&(l.node._=d(n._)),l.node=o.soul.ify(l.node,e.link.is(l.link)),l.link=l.link||e.link.ify(o.soul(l.node))),(u=p.map)&&(u.call(p.as||{},n,i,r,l),c(r,i))){if(void 0===(n=r[i]))return void s(r,i);if(!(a=f(n,i,r,l,p)))return}if(!i)return l.node;if(!0===a)return n;if((u=t(p,{obj:n,path:l.path.concat(i)})).node)return u.link}}function a(t){var n=this,i=e.link.is(n.link),r=n.env.graph;n.link=n.link||e.link.ify(t),n.link[e.link._]=t,n.node&&n.node[o._]&&(n.node[o._][e.link._]=t),c(r,i)&&(r[t]=r[i],s(r,i))}function f(t,o,i,r,a){var s;return!!e.is(t)||(u(t)?1:(s=a.invalid)?f(t=s.call(a.as||{},t,o,i),o,i,r,a):(a.err="Invalid value at '"+r.path.concat(o).join(".")+"'!",void(n.list.is(t)&&(a.err+=" Use `.set(item)` instead of an Array."))))}i.ify=function(n,o,i){var r={path:[],obj:n};return o?"string"==typeof o?o={soul:o}:o instanceof Function&&(o.map=o):o={},o.soul&&(r.link=e.link.ify(o.soul)),o.shell=(i||{}).shell,o.graph=o.graph||{},o.seen=o.seen||[],o.as=o.as||i,t(o,r),o.root=r.node,o.graph}}(),i.node=function(t){var n=o.soul(t);if(n)return l({},n,t)},function(){function t(t,n){var r,a;if(o._!==n)(r=e.link.is(t))?(a=this.opt.seen[r])?this.obj[n]=a:this.obj[n]=this.opt.seen[r]=i.to(this.graph,r,this.opt):this.obj[n]=t;else{if(f(t,e.link._))return;this.obj[n]=d(t)}}i.to=function(n,e,o){if(n){var i={};return o=o||{seen:{}},p(n[e],t,{obj:i,graph:n,opt:o}),i}}}();n.fn.is;var r=n.obj,u=r.is,s=r.del,c=r.has,f=r.empty,l=r.put,p=r.map,d=r.copy;t.exports=i}))(a,"./graph"),a((function(t){a("./onto"),t.exports=function(t,n){if(this.on){if(!(t instanceof Function)){if(!t||!n)return;var e=t["#"]||t,o=(this.tag||empty)[e];if(!o)return;return o=this.on(e,n),clearTimeout(o.err),!0}e=n&&n["#"]||Math.random().toString(36).slice(2);if(!t)return e;var i=this.on(e,t,n);return i.err=i.err||setTimeout((function(){i.next({err:"Error: No ACK received yet.",lack:!0}),i.off()}),(this.opt||{}).lack||9e3),e}}}))(a,"./ask"),a((function(t){var n=a("./type");var e=n.time.is;t.exports=function(t){var o={s:{}};return t=t||{max:1e3,age:27e3},o.check=function(t){var n;return!!(n=o.s[t])&&(n.pass?n.pass=!1:o.track(t))},o.track=function(n,i){var r=o.s[n]||(o.s[n]={});return r.was=e(),i&&(r.pass=!0),o.to||(o.to=setTimeout(o.drop,t.age+9)),r},o.drop=function(i){var r=e();n.obj.map(o.s,(function(e,a){e&&(i||t.age)>r-e.was||n.obj.del(o.s,a)})),o.to=null},o}}))(a,"./dup"),a((function(t){function n(t){return t instanceof n?(this._={gun:this,$:this}).$:this instanceof n?n.create(this._={gun:this,$:this,opt:t}):new n(t)}n.is=function(t){return t instanceof n||t&&t._&&t===t._.$||!1},n.version=.9,n.chain=n.prototype,n.chain.toJSON=function(){};var e=a("./type");e.obj.to(e,n),n.HAM=a("./HAM"),n.val=a("./val"),n.node=a("./node"),n.state=a("./state"),n.graph=a("./graph"),n.on=a("./onto"),n.ask=a("./ask"),n.dup=a("./dup"),function(){function t(e){var i,r,a=this.as,u=a.at||a,s=u.$;(r=e["#"])||(r=e["#"]=f(9)),(i=u.dup).check(r)?a.out===e.out&&(e.out=o,this.to.next(e)):(i.track(r),(r=e["@"])&&i.track(r),u.ask(r,e)||(e.get&&n.on.get(e,s),e.put&&n.on.put(e,s)),this.to.next(e),a.out||(e.out=t,u.on("out",e)))}n.create=function(e){e.root=e.root||e,e.graph=e.graph||{},e.on=e.on||n.on,e.ask=e.ask||n.ask,e.dup=e.dup||n.dup();var o=e.$.opt(e.opt);return e.once||(e.on("in",t,e),e.on("out",t,{at:e,out:t}),n.on("create",e),e.on("create",e)),e.once=1,o}}(),function(){n.on.put=function(r,a){var c=a._,f={$:a,graph:c.graph,put:{},map:{},souls:{},machine:n.state(),ack:r["@"],cat:c,stop:{}};if(n.obj.map(r.put,s,f)){if(n.graph.is(r.put,null,e,f)||(f.err="Error: Invalid graph!"),f.err)return c.on("in",{"@":r["#"],err:n.log(f.err)});if(g(f.put,i,f),f.async||g(f.map,u,f),o!==f.defer){var l=f.defer-f.machine;setTimeout((function(){n.on.put(r,a)}),l>t?t:l)}f.diff&&c.on("put",h(r,{put:f.diff}))}};var t=2147483647;function e(t,e,o,i){var r=this,a=n.state.is(o,e);if(!a)return r.err="Error: No state on '"+e+"' in node '"+i+"'!";var u=r.graph[i]||b,s=n.state.is(u,e,!0),c=u[e],f=n.HAM(r.machine,a,s,t,c);f.incoming?(r.put[i]=n.state.to(o,e,r.put[i]),(r.diff||(r.diff={}))[i]=n.state.to(o,e,r.diff[i]),r.souls[i]=!0):f.defer&&(r.defer=a<(r.defer||1/0)?a:r.defer)}function i(t,n){var e=this,o=e.$._,i=(o.next||b)[n];if(!i){if(!(o.opt||b).super)return void(e.souls[n]=!1);i=e.$.get(n)._}var s=e.map[n]={put:t,get:n,$:i.$},c={ctx:e,msg:s};e.async=!!o.tag.node,e.ack&&(s["@"]=e.ack),g(t,r,c),e.async&&(e.and||o.on("node",(function(t){this.to.next(t),t===e.map[t.get]&&(e.souls[t.get]=!1,g(t.put,a,t),g(e.souls,(function(t){if(t)return t}))||e.c||(e.c=1,this.off(),g(e.map,u,e)))})),e.and=!0,o.on("node",s))}function r(t,e){var o=this.ctx,i=o.graph,r=this.msg,a=r.get,u=r.put,s=r.$._;i[a]=n.state.to(u,e,i[a]),o.async||(s.put=n.state.to(u,e,s.put))}function a(t,e){var o=this.put,i=this.$._;i.put=n.state.to(o,e,i.put)}function u(t,n){t.$&&(this.cat.stop=this.stop,t.$._.on("in",t),this.cat.stop=null)}function s(t,n){if(t!==this.graph[n])return!0}n.on.get=function(t,e){var o=e._,i=t.get,r=i[v],a=o.graph[r],u=i[y],s=(o.next||(o.next={}))[r];if(!a)return o.on("get",t);if(u){if("string"!=typeof u||!d(a,u))return o.on("get",t);a=n.state.to(a,u)}else a=n.window?n.obj.copy(a):a;a=n.graph.node(a),(s||b).ack;var c=function(){};c.faith=!0,o.on("in",{"@":t["#"],how:"mem",put:a,$:e,_:c}),o.on("get",t)}}(),n.chain.opt=function(t){t=t||{};var e=this._,o=t.peers||t;return p(t)||(t={}),p(e.opt)||(e.opt=t),c(o)&&(o=[o]),i(o)&&(o=g(o,(function(t,n,e){(n={}).id=n.url=t,e(t,n)})),p(e.opt.peers)||(e.opt.peers={}),e.opt.peers=h(o,e.opt.peers)),e.opt.peers=e.opt.peers||{},g(t,(function t(n,e){!d(this,e)||s.is(n)||l.empty(n)?this[e]=n:n&&n.constructor!==Object&&!i(n)||g(n,t,this[e])}),e.opt),n.on("opt",e),e.opt.uuid=e.opt.uuid||function(){return m()+f(12)},this};var o,i=n.list.is,s=n.text,c=s.is,f=s.random,l=n.obj,p=l.is,d=l.has,h=l.to,g=l.map,m=(l.copy,n.state.lex),v=n.val.link._,y=".",b=(n.node._,n.val.link.is,{});r.only=function(t,n){return r.only.i&&t===r.only.i&&r.only.i++&&(r.log.apply(r,arguments)||n)},n.log=function(){return!n.log.off&&r.log.apply(r,arguments),[].slice.call(arguments).join(" ")},n.log.once=function(t,e,o){return(o=n.log.once)[t]=o[t]||0,o[t]++||n.log(e)},n.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, feel free to ask for help on https://gitter.im/amark/gun and ask StackOverflow questions tagged with 'gun'!"),"undefined"!=typeof window&&((window.GUN=window.Gun=n).window=window);try{void 0!==u&&(u.exports=n)}catch(t){}t.exports=n}))(a,"./root"),a((function(t){var n=a("./root");n.chain.back=function(t,i){if(-1===(t=t||1)||1/0===t)return this._.root.$;if(1===t)return(this._.back||this._).$;var r=this._;if("string"==typeof t&&(t=t.split(".")),t instanceof Array){for(var a=0,u=t.length,s=r;a<u;a++)s=(s||o)[t[a]];return e!==s?i?this:s:(s=r.back)?s.$.back(t,i):void 0}if(t instanceof Function){var c;for(s={back:r};(s=s.back)&&e===(c=t(s,i)););return c}return n.num.is(t)?(r.back||r).$.back(t-1):this};var e,o={}}))(a,"./back"),a((function(t){var n=a("./root");function e(t){var e,o,i=this.as,r=i.back,a=i.root;if(t.$||(t.$=i.$),this.to.next(t),e=t.get){if(i.lex&&(t.get=m(i.lex,t.get)),e["#"]||i.soul){if(e["#"]=e["#"]||i.soul,t["#"]||(t["#"]=y(9)),r=a.$.get(e["#"])._,e=e["."]){if(h(r.put,e)){if((o=(u=r.$.get(e)._).ack)||(u.ack=-1),r.on("in",{$:r.$,put:n.state.to(r.put,e),get:r.get}),o)return}else if("string"!=typeof e){var u={},s=(r.put||{})._;n.obj.map(r.put,(function(t,o){n.text.match(o,e)&&(u[o]=t)})),n.obj.empty(u)||(u._=s,r.on("in",{$:r.$,put:u,get:r.get}))}}else{if((o=r.ack)||(r.ack=-1),h(r,"put")&&r.on("in",r),o&&l!==r.put)return;t.$=r.$}return a.ask(f,t),a.on("in",t)}if(a.now&&(a.now[i.id]=a.now[i.id]||!0,i.pass={}),e["."])return i.get?(t={get:{".":i.get},$:i.$},r.ask||(r.ask={}),r.ask[i.get]=t.$._,r.on("out",t)):(t={get:{},$:i.$},r.on("out",t));if(i.ack=i.ack||-1,i.get)return t.$=i.$,e["."]=i.get,(r.ask||(r.ask={}))[i.get]=t.$._,r.on("out",t)}return r.on("out",t)}function o(t){var e,o,a=this,u=a.as,f=u.root,d=(t.$||p)._||p,y=t.put;if(u.get&&t.get!==u.get&&(t=m(t,{get:u.get})),u.has&&d!==u&&(t=m(t,{$:u.$}),d.ack&&(u.ack=d.ack)),l===y){if(o=d.put,a.to.next(t),u.soul)return;if(l===o&&l!==d.put)return;return r(u,t,a),u.has&&c(u,t),g(d.echo,u.id),void g(u.map,d.id)}if(u.soul)return a.to.next(t),r(u,t,a),void(u.next&&v(y,s,{msg:t,cat:u}));if(!(e=n.val.link.is(y)))return n.val.is(y)?(u.has||u.soul?c(u,t):(d.has||d.soul)&&((d.echo||(d.echo={}))[u.id]=d.echo[d.id]||u,(u.map||(u.map={}))[d.id]=u.map[d.id]||{at:d}),a.to.next(t),void r(u,t,a)):(u.has&&d!==u&&h(d,"put")&&(u.put=d.put),(e=n.node.soul(y))&&d.has&&(d.put=u.root.$.get(e)._.put),o=(f.stop||{})[d.id],a.to.next(t),i(u,t,d,e),r(u,t,a),void(u.next&&v(y,s,{msg:t,cat:u})));f.stop;(o=(o=f.stop||{})[d.id]||(o[d.id]={})).is=o.is||d.put,o[u.id]=d.put||!0,a.to.next(t),i(u,t,d,e),r(u,t,a)}function i(t,e,o,r){if(r&&b!==t.get){var a=t.root.$.get(r)._;t.has?o=a:o.has&&i(o,e,o,r),o!==t&&(o.$||(o={}),(o.echo||(o.echo={}))[t.id]=o.echo[t.id]||t,t.has&&!(t.map||p)[o.id]&&c(t,e),(r!==(a=o.id?(t.map||(t.map={}))[o.id]=t.map[o.id]||{at:o}:{}).link||a.pass||t.pass)&&(t.pass&&(n.obj.map(t.map,(function(t){t.pass=!0})),g(t,"pass")),a.pass&&g(a,"pass"),t.has&&(t.link=r),function(t,e){var o=t.root.$.get(e)._,i=t.lex;if((t.ack||i)&&((i=i||{})["#"]=e,o.on("out",{get:i}),!t.ask))return;o=t.ask,n.obj.del(t,"ask"),v(o||t.next,(function(t,n){var o=t.lex||{};o["#"]=e,o["."]=o["."]||n,t.on("out",{get:o})})),n.obj.del(t,"ask")}(t,a.link=r)))}}function r(t,n,e){t.echo&&v(t.echo,u,n)}function u(t){t&&t.on&&t.on("in",this)}function s(t,e){var o,i,r,a=this.cat.next||p,u=this.msg;(b!==e||a[e])&&(i=a[e])&&(i.has?(l!==i.put&&n.val.link.is(t)||(i.put=t),o=i.$):(r=u.$)&&(r=(o=u.$.get(e))._,l!==r.put&&n.val.link.is(t)||(r.put=t)),i.on("in",{put:t,get:e,$:o,via:u}))}function c(t,e){if(t.has||t.soul){var o=t.map;t.root;t.map=null,t.has&&(t.dub&&t.root.stop&&(t.dub=null),t.link=null),(t.pass||e["@"]||null!==o)&&(l===o&&n.val.link.is(t.put)||(v(o,(function(n){(n=n.at)&&g(n.echo,t.id)})),o=t.put,v(t.next,(function(n,e){if(l===o&&l!==t.put)return!0;n.put=l,n.ack&&(n.ack=-1),n.on("in",{get:e,$:n.$,put:l})}))))}}function f(t,e){var o=this.as,i=o.get||p,r=o.$._,a=(t.put||p)[i["#"]];if(r.ack&&(r.ack=r.ack+1||1),t.put&&("string"!=typeof i["."]||h(a,r.get)))b!=i["."]?n.on.put(t,r.root.$):r.on("in",{get:r.get,put:n.val.link.ify(i["#"]),$:r.$,"@":t["@"]});else{if(r.put!==l)return;r.on("in",{get:r.get,put:r.put=l,$:r.$,"@":t["@"]})}}n.chain.chain=function(t){var i,r=this._,a=new(t||this).constructor(this),u=a._;return u.root=i=r.root,u.id=++i.once,u.back=this._,u.on=n.on,u.on("in",o,u),u.on("out",e,u),a};var l,p={},d=n.obj,h=d.has,g=(d.put,d.del),m=d.to,v=d.map,y=n.text.random,b=(n.val.link._,n.node._)}))(a,"./chain"),a((function(t){var n=a("./root");function e(t){var e,o=this,r=o.as,a=r.at.root,s=(t.$||{})._||{},f=t.put||s.put;if((e=a.now)&&o!==e[r.now])return o.to.next(t);if(o.seen&&s.id&&o.seen[s.id])return o.to.next(t);if((e=f)&&e[c._]&&(e=c.is(e))&&(e=(t.$$=s.root.gun.get(e))._,i!==e.put&&(t=u(t,{put:f=e.put}))),(e=a.mum)&&s.id){var l=s.id+(o.id||(o.id=n.text.random(9)));if(e[l])return;i===f||c.is(f)||(e[l]=!0)}r.use(t,o),o.stun?o.stun=null:o.to.next(t)}function o(t){var n=this.on;if(!t||n.soul||n.has)return this.off();if(t=(t=(t=t.$||t)._||t).id){var e;n.map;if((e=this.seen||(this.seen={}))[t])return!0;e[t]=!0}}n.chain.get=function(t,a,u){var p;if("string"!=typeof t){if(t instanceof Function){if(!0===a)return function(t,n,e,o){var r,a=t._,u=0;if(r=a.soul||a.link||a.dub)return n(r,o,a);if(a.jam)return a.jam.push([n,o]);a.jam=[[n,o]],t.get((function(t,n){if(!(i===t.put&&(r=Object.keys(a.root.opt.peers).length)&&++u<r)){n.rid(t);var e,o=(o=t.$)&&o._||{},s=0;for(r=a.jam,delete a.jam;e=r[s++];){var l=e[0];e=e[1],l&&l(o.link||o.soul||c.is(t.put)||f(t.put)||o.dub,e,t,n)}}}),{out:{get:{".":!0}}})}(this,t,0,u),this;var d,h=(p=this)._,g=h.root,m=g.now;(u=a||{}).at=h,u.use=t,u.out=u.out||{},u.out.get=u.out.get||{},(d=h.on("in",e,u)).rid=o,(g.now={$:1})[u.now=h.id]=d;var v=g.mum;return g.mum={},h.on("out",u.out),g.mum=v,g.now=m,p}return s(t)?this.get(""+t,a,u):(m=c.is(t))?this.get(m,a,u):r.is(t)?(p=this,(m=((m=t["#"])||l)["="]||m)&&(p=p.get(m)),p._.lex=t,p):((u=this.chain())._.err={err:n.log("Invalid get request!",t)},a&&a.call(u,u._.err),u)}return(p=(this._.next||l)[t])||(p=function(t,n){var e=n._,o=e.next,i=n.chain()._;o||(o=e.next={});o[i.get=t]=i,n===e.root.$?i.soul=t:(e.soul||e.has)&&(i.has=t);return i}(t,this)),p=p.$,(m=this._.stun)&&(p._.stun=p._.stun||m),a&&a instanceof Function&&p.get(a,u),p};var i,r=n.obj,u=(r.map,r.has,n.obj.to),s=n.num.is,c=n.val.link,f=n.node.soul,l=(n.node._,{})}))(a,"./get"),a((function(t){var n=a("./root");function e(t){t&&t()}function o(){var t=this;t.graph&&!d(t.stun,i)&&(t.res=t.res||function(t){t&&t()},t.res((function(){var e=t.$.back(-1)._,o=e.ask((function(o){e.root.on("ack",o),o.err&&n.log(o),++i>(t.acks||0)&&this.off(),t.ack&&t.ack(o,this)}),t.opt),i=0,r=e.root.now;f.del(e.root,"now");var a=e.root.mum;e.root.mum={},t.ref._.on("out",{$:t.ref,put:t.out=t.env.graph,opt:t.opt,"#":o}),e.root.mum=a?f.to(a,e.root.mum):a,e.root.now=r}),t),t.res&&t.res())}function i(t,n){if(t)return!0}function r(t,e,o,i){var r=this,a=n.is(t);!e&&i.path.length&&(r.res||m)((function(){for(var e=i.path,o=r.ref,s=(r.opt,0),c=e.length;s<c;s++)o=o.get(e[s]);a&&(o=t);var f=o._.dub;if(f||(f=n.node.soul(i.obj)))return o.back(-1).get(f),void i.soul(f);(r.stun=r.stun||{})[e]=!0,o.get(u,!0,{as:{at:i,as:r,p:e}})}),{as:r,at:i})}function u(t,e,o,i){var r=(e=e.as).at;e=e.as;var a=((o||{}).$||{})._||{};t=a.dub=a.dub||t||n.node.soul(r.obj)||n.node.soul(o.put||a.put)||n.val.link.is(o.put||a.put)||(e.via.back("opt.uuid")||n.text.random)(),i&&(i.stun=!0),t?s(a,a.dub=t,r,e):e.via.back("opt.uuid")((function(t,o){if(t)return n.log(t);s(a,a.dub=a.dub||o,r,e)}))}function s(t,n,e,o){t.$.back(-1).get(n),e.soul(n),o.stun[e.path]=!1,o.batch()}function c(t,e,o,i){if(e=e.as,o.$&&o.$._)if(o.err)n.log("Please report this as an issue! Put.any.err");else{var r,a=o.$._,u=a.put,s=e.opt||{};if(!(r=e.ref)||!r._.now){if(i&&(i.stun=!0),e.ref!==e.$){if(!(r=e.$._.get||a.get))return void n.log("Please report this as an issue! Put.no.get");e.data=p({},r,e.data),r=null}if(void 0===u){if(!a.get)return;t||(r=a.$.back((function(t){if(t.link||t.soul)return t.link||t.soul;e.data=p({},t.get,e.data)})),e.not=!0),a=(r=r||a.soul||a.link||a.dub)?a.root.$.get(r)._:a,e.soul=r,u=e.data}e.not||(e.soul=e.soul||t)||(e.path&&l(e.data)?e.soul=(s.uuid||e.via.back("opt.uuid")||n.text.random)():(v==a.get&&(e.soul=(a.put||h)["#"]||a.dub),e.soul=e.soul||a.soul||a.link||(s.uuid||e.via.back("opt.uuid")||n.text.random)()),e.soul)?e.ref.put(e.data,e.soul,e):e.via.back("opt.uuid")((function(t,o){if(t)return n.log(t);e.ref.put(e.data,e.soul=o,e)}))}}}n.chain.put=function(t,i,a){var u,s=this,f=s._,d=f.root.$;d._;return(a=a||{}).data=t,a.via=a.$=a.via||a.$||s,"string"==typeof i?a.soul=i:a.ack=a.ack||i,f.soul&&(a.soul=f.soul),a.soul||d===s?l(a.data)?(a.soul=a.soul||(a.not=n.node.soul(a.data)||(a.via.back("opt.uuid")||n.text.random)()),a.soul?(a.$=d.get(a.soul),a.ref=a.$,function(t){t.batch=o;var e=t.opt||{},i=t.env=n.state.map(r,e.state);if(i.soul=t.soul,t.graph=n.graph.ify(t.data,i,t),i.err)return(t.ack||g).call(t,t.out={err:n.log(i.err)}),void(t.res&&t.res());t.batch()}(a),s):(a.via.back("opt.uuid")((function(t,e){if(t)return n.log(t);(a.ref||a.$).put(a.data,a.soul=e,a)})),s)):((a.ack||g).call(a,a.out={err:n.log("Data saved to the root level of the graph must be a node (an object), not a",typeof a.data,'of "'+a.data+'"!')}),a.res&&a.res(),s):n.is(t)?(t.get((function(t,e,o){if(!t)return n.log("The reference you are saving is a",typeof o.put,'"'+o.put+'", not a node (object)!');s.put(n.val.link.ify(t),i,a)}),!0),s):(f.has&&(u=n.val.link.is(t))&&(f.dub=u),a.ref=a.ref||d._===(u=f.back)?s:u.$,a.ref._.soul&&n.val.is(a.data)&&f.get?(a.data=p({},f.get,a.data),a.ref.put(a.data,a.soul,a),s):(a.ref.get(c,!0,{as:a}),a.out||(a.res=a.res||e,a.$._.stun=a.ref._.stun),s))};var f=n.obj,l=f.is,p=f.put,d=f.map,h={},g=function(){},m=function(t,n){t.call(n||h)},v=n.node._}))(a,"./put"),a((function(t){var n=a("./root");a("./chain"),a("./back"),a("./put"),a("./get"),t.exports=n}))(a,"./index"),a((function(t){var n=a("./index");function e(t,n){var e,o=t.$,r=((o||{})._||{}).put||t.put;this.at;if(i!==r){if(e=t.$$){if(e=t.$$._,i===e.put)return;r=e.put}this.change&&(r=t.put),this.as?this.ok.call(this.as,t,n):this.ok.call(o,r,t.get,t,n)}}function o(t,e,r){if(t.$){var a,u,s=this.as,f=(s.at,t.$),l=f._,p=l.put||t.put;(u=t.$$)&&(a=u=t.$$._,i!==a.put&&(p=a.put)),(u=e.wait)&&(u=u[l.id])&&clearTimeout(u),e.ack=(e.ack||0)+1,!r&&i===p&&e.ack<=(s.acks||Object.keys(l.root.opt.peers).length)||(!r&&(i===p||l.soul||l.link||a&&!(0<a.ack))||i===p&&(u=Object.keys(l.root.opt.peers).length)&&!r&&(a||l).ack<u?u=(e.wait={})[l.id]=setTimeout((function(){o.call({as:s},t,e,u||1)}),s.wait||99):(a&&i===a.put&&(u=c.is(p))&&(p=n.node.ify({},u)),e.rid?e.rid(t):e.off(),s.ok.call(f||s.$,p,t.get)))}else e.off()}n.chain.on=function(t,n,o,i){var r,a=this._;if("string"==typeof t)return n?(r=a.on(t,n,o||a,i),o&&o.$&&(o.subs||(o.subs=[])).push(r),this):a.on(t);var u=n;return(u=!0===u?{change:!0}:u||{}).at=a,u.ok=t,this.get(e,u),this},n.chain.val=function(t,e){return n.log.once("onceval","Future Breaking API Change: .val -> .once, apologies unexpected."),this.once(t,e)},n.chain.once=function(t,e){var r=this,a=r._,u=a.put;if(0<a.ack&&i!==u)return(t||f).call(r,u,a.get),r;if(!t){n.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it.");var s=r.chain();return s._.nix=r.once((function(){s._.on("in",r._)})),s}return(e=e||{}).ok=t,e.at=a,e.out={"#":n.text.random(9)},r.get(o,{as:e}),e.async=!0,r},n.chain.off=function(){var t,n=this._,e=n.back;if(e)return n.ack=0,(t=e.next)&&t[n.get]&&s(t,n.get),(t=e.ask)&&s(t,n.get),(t=e.put)&&s(t,n.get),(t=n.soul)&&s(e.root.graph,t),(t=n.map)&&u(t,(function(t){t.link&&e.root.$.get(t.link).off()})),(t=n.next)&&u(t,(function(t){t.$.off()})),n.on("off",{}),this};var i,r=n.obj,u=r.map,s=(r.has,r.del),c=(r.to,n.val.link),f=function(){}}))(a,"./on"),a((function(t){var n=a("./index");function e(t){if(!t.put||n.val.is(t.put))return this.to.next(t);this.as.nix&&this.off(),i(t.put,o,{at:this.as,msg:t}),this.to.next(t)}function o(t,e){if(u!==e){var o=this.msg.$,i=o._,r=this.at,a=i.lex;a&&!n.text.match(e,a["."]||a["#"]||a)||(((a=o.get(e)._).echo||(a.echo={}))[r.id]=a.echo[r.id]||r)}}n.chain.map=function(t,o,i){var a,u=this._;return t?(n.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),a=this.chain(),this.map().on((function(e,o,i,u){var s=(t||r).call(this,e,o,i,u);if(void 0!==s)return e===s?a._.on("in",i):n.is(s)?a._.on("in",s._):void a._.on("in",{get:o,put:s})})),a):(a=u.each)?a:(u.each=a=this.chain(),a._.nix=this.back("nix"),this.on("in",e,a._),a)};var i=n.obj.map,r=function(){},u=n.node._}))(a,"./map"),a((function(t){var n=a("./index");n.chain.set=function(t,e,o){var i,r=this;return e=e||function(){},(o=o||{}).item=o.item||t,(i=n.node.soul(t))&&(t=n.obj.put({},i,n.val.link.ify(i))),n.is(t)?(t.get((function(t,i,a){if(!t)return e.call(r,{err:n.log('Only a node can be linked! Not "'+a.put+'"!')});r.put(n.obj.put({},t,n.val.link.ify(t)),e,o)}),!0),t):(n.obj.is(t)&&(t=r.back(-1).get(i=i||n.node.soul(t)||r.back("opt.uuid")()).put(t)),r.get(i||n.state.lex()+n.text.random(7)).put(t,e,o))}}))(a,"./set"),a((function(t){if("undefined"!=typeof Gun){var n;try{n=(Gun.window||function(){}).localStorage}catch(t){}n||(Gun.log("Warning: No localStorage exists to persist data to!"),n={setItem:function(t,n){this[t]=n},removeItem:function(t){delete this[t]},getItem:function(t){return this[t]}}),Gun.on("create",(function(t){var e=this.to,o=t.opt;if(t.once)return e.next(t);if(!1===o.localStorage)return e.next(t);o.prefix=o.file||"gun/";var i,r,a=Gun.obj.ify(n.getItem("gap/"+o.prefix))||{},u=Gun.obj.empty;if(!u(a)){var s=Gun.obj.ify(n.getItem(o.prefix))||{},c={};Gun.obj.map(a,(function(t,n){Gun.obj.map(t,(function(t,e){c[n]=Gun.state.to(s[n],e,c[n])}))})),setTimeout((function(){t.on("out",{put:c,"#":t.ask(f)})}),1)}function f(t){if(!t.err&&t.ok){var n=t["@"];setTimeout((function(){Gun.obj.map(a,(function(t,e){Gun.obj.map(t,(function(e,o){n===e&&delete t[o]})),u(t)&&delete a[e]})),p()}),o.wait||1)}}t.on("out",(function(t){t.lS||(Gun.is(t.$)&&t.put&&!t["@"]&&(i=t["#"],Gun.graph.is(t.put,null,l),r||(r=setTimeout(p,o.wait||1))),this.to.next(t))})),t.on("ack",f),e.next(t);var l=function(t,n,e,o){(a[o]||(a[o]={}))[n]=i},p=function(){clearTimeout(r),r=!1;try{n.setItem("gap/"+o.prefix,JSON.stringify(a))}catch(t){Gun.log(err=t||"localStorage failure")}}})),Gun.on("create",(function(t){this.to.next(t);var e=t.opt;if(!t.once&&!1!==e.localStorage){e.prefix=e.file||"gun/";t.graph;var o,i={},r=0,a=Gun.obj.ify(n.getItem(e.prefix))||{};t.on("localStorage",a),t.on("put",(function(t){if(this.to.next(t),Gun.graph.is(t.put,null,u),t["@"]||(i[t["#"]]=!0),(r+=1)>=(e.batch||1e3))return s();o||(o=setTimeout(s,e.wait||1))})),t.on("get",(function(n){this.to.next(n);var e,o,i=n.get;function r(){if(i&&(e=i["#"])){var r=i["."];(o=a[e]||void 0)&&r&&(o=Gun.state.to(o,r)),t.on("in",{"@":n["#"],put:Gun.graph.node(o),how:"lS",lS:n.$})}}Gun.debug?setTimeout(r,1):r()}));var u=function(t,n,e,o){a[o]=Gun.state.to(e,n,a[o])},s=function(u){var c;r=0,clearTimeout(o),o=!1;var f=i;i={},u&&(a=u);try{n.setItem(e.prefix,JSON.stringify(a))}catch(n){Gun.log(c=(n||"localStorage failure")+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),t.on("localStorage:error",{err:c,file:e.prefix,flush:a,retry:s})}(c||Gun.obj.empty(e.peers))&&Gun.obj.map(f,(function(n,e){t.on("in",{"@":e,err:c,ok:0})}))}}}))}}))(a,"./adapters/localStorage"),a((function(t){var n=a("../type"),e=void 0!==o?o:setTimeout;function i(t){return t||{_:t._,"##":t["##"]}}!function(){n.text.hash=function(t){if("string"!=typeof t)return{err:1};var n=0;if(!t.length)return n;for(var e=0,o=t.length;e<o;++e)n=(n<<5)-n+t.charCodeAt(e),n|=0;return n};var t=JSON.stringify;function e(t,e){var i;return e instanceof Object?(n.obj.map(Object.keys(e).sort(),o,{to:i={},on:e}),i):e}function o(t){this.to[t]=this.on[t]}n.obj.hash=function(o,i){if(i||void 0!==(o=t(o,e)))return n.text.hash(i||o||"")},n.obj.hash.sort=e}();var u,s=!0,c=r.LOG;try{t.exports=function(t){var o=function(){},a=t.opt||{};a.log=a.log||r.log,a.gap=a.gap||a.wait||1,a.pack=a.pack||.3*(a.memory?1e3*a.memory*1e3:1399e6);var f=t.dup;o.hear=function(r,s){if(r){var p,d,h,g=r[0];if(a.pack<=r.length)return o.say({dam:"!",err:"Message too big!"},s);if("{"!=r[2]&&(o.hear.d+=r.length||0,++o.hear.c),"["===g){try{p=JSON.parse(r)}catch(t){a.log("DAM JSON parse error",t)}if(!p)return;return c&&a.log(+new Date,p.length,"in hear batch"),void function t(){var n;c&&(n=+new Date);for(var i,r=100;r--&&(i=p.shift());)o.hear(i,s);c&&a.log(n,+new Date-n,"batch heard"),p.length&&e(t,0)}()}if("{"===g||n.obj.is(r)&&(p=r)){try{p=p||JSON.parse(r)}catch(t){return a.log("DAM JSON parse error",t)}if(!p)return;if((d=p["#"])||(d=p["#"]=n.text.random(9)),p.DBG_s&&a.log(+new Date-p.DBG_s,"to hear",d),f.check(d))return;if(f.track(d,!0).it=i(p),(h=p["##"])||u===p.put||(h=p["##"]=n.obj.hash(p.put)),h&&(g=p["@"]||p.get&&d)){if(f.check(g+h))return;f.track(g+h,!0).it=i(p)}return(p._=function(){}).via=s,(g=p["><"])&&(p._.to=n.obj.map(g.split(","),l)),p.dam?void((g=o.hear[p.dam])&&g(p,s,t)):(c&&(m=+new Date),t.on("in",p),void(c&&!p.nts&&(v=+new Date-m)>9&&a.log(m,v,"msg",p["#"])));var m,v}}};var l=function(t,n,e){e(t,!0)};function p(t,n){try{var e,i,r=n.wire;c&&(e=+new Date),n.say?n.say(t):r.send&&r.send(t),c&&(i=+new Date-e)>9&&a.log(e,i,"wire send",t.length),o.say.d+=t.length||0,++o.say.c}catch(e){(n.queue=n.queue||[]).push(t)}}o.hear.c=o.hear.d=0,function(){var t,e=0;function r(n){o.say(t,n)}function l(t){var n=t.batch;if(t.batch=t.tail=null,n&&n.length){var e;c&&(e=+new Date);try{n=1===n.length?n[0]:JSON.stringify(n)}catch(t){return a.log("DAM JSON stringify error",t)}c&&a.log(e,+new Date-e,"say stringify",n.length),n&&p(n,t)}}(o.say=function(d,h){if(this.to&&this.to.next(d),!d)return!1;var g,m,v,y;c&&new Date;var b=d._||(d._=function(){});if((g=d["#"])||(g=d["#"]=n.text.random(9)),(m=d["##"])||u===d.put||(m=d["##"]=n.obj.hash(d.put)),!(y=b.raw)&&(y=o.raw(d),m&&(v=d["@"])&&(f.track(v+m).it=i(d),v=(f.s[v]||s).it))){if(m===v["##"])return!1;v["##"]=m}if(f.track(g).it=i(d),h||(h=(v=f.s[d["@"]])&&(v=v.it)&&(v=v._)&&(v=v.via)),!h&&d["@"])return c&&a.log(+new Date,++e,"total no peer to ack to"),!1;if(!h&&o.way)return o.way(d);if(!h||!h.id)return t=d,!!n.obj.is(h||a.peers)&&void n.obj.map(h||a.peers,r);if(!h.wire&&o.wire&&o.wire(h),g!==h.last){if(h.last=g,h===b.via)return!1;if((v=b.to)&&(v[h.url]||v[h.pid]||v[h.id]))return!1;if(h.batch){if(h.tail=(v=h.tail||0)+y.length,h.tail<=a.pack)return void h.batch.push(y);l(h)}h.batch=[],setTimeout((function(){l(h)}),a.gap),p(y,h)}}).c=o.say.d=0}(),function(){o.raw=function(e){if(!e)return"";var o,i=e._||{};if(o=i.raw)return o;if("string"==typeof e)return e;if(!e.dam){var r=0,u=[];n.obj.map(a.peers,(function(t){if(u.push(t.url||t.pid||t.id),++r>3)return!0})),r>1&&(e["><"]=u.join())}var s=t(e);return i&&(s||"").length<1e5&&(i.raw=s),s};var t=JSON.stringify}(),o.hi=function(e){var i=e.wire||{};e.id?a.peers[e.url||e.id]=e:(i=e.id=e.id||n.text.random(9),o.say({dam:"?",pid:t.opt.pid},a.peers[i]=e),delete f.s[e.last]),e.met=e.met||+new Date,i.hied||t.on(i.hied="hi",e),i=e.queue,e.queue=[],n.obj.map(i,(function(t){p(t,e)}))},o.bye=function(n){t.on("bye",n);var e=+new Date;e-=n.met||e,o.bye.time=((o.bye.time||e)+e)/2,c=r.LOG},o.hear["!"]=function(t,n){a.log("Error:",t.err)},o.hear["?"]=function(t,n){t.pid&&(n.pid||(n.pid=t.pid),t["@"])||(o.say({dam:"?",pid:a.pid,"@":t["#"]},n),delete f.s[n.last])},t.on("create",(function(t){t.opt.pid=t.opt.pid||n.text.random(9),this.to.next(t),t.on("out",o.say)})),t.on("bye",(function(t,e){t=a.peers[t.id||t]||t,this.to.next(t),t.bye?t.bye():(e=t.wire)&&e.close&&e.close(),n.obj.del(a.peers,t.id),t.wire=null}));var d={};return t.on("bye",(function(t,n){this.to.next(t),(n=t.url)&&(d[n]=!0,setTimeout((function(){delete d[n]}),a.lack||9e3))})),t.on("hi",(function(e,i){this.to.next(e),(i=e.url)&&d[i]&&(delete d[i],n.obj.map(t.next,(function(r,a){(i={})[a]=t.graph[a],o.say({"##":n.obj.hash(i),get:{"#":a}},e)})))})),o}}catch(t){}}))(a,"./adapters/mesh"),a((function(n){var e=a("../index");e.Mesh=a("./mesh"),e.on("opt",(function(n){this.to.next(n);var o=n.opt;if(!n.once&&!1!==o.WebSocket){var i;"undefined"!=typeof window&&(i=window),void 0!==t&&(i=t),i=i||{};var r=o.WebSocket||i.WebSocket||i.webkitWebSocket||i.mozWebSocket;if(r){o.WebSocket=r;var a=o.mesh=o.mesh||e.Mesh(n);a.wire||o.wire;a.wire=o.wire=s,setTimeout((function(){n.on("out",{dam:"hi"})}),1);var u="undefined"!=typeof document&&document}}function s(t){try{if(!t||!t.url)return e&&e(t);var n=t.url.replace("http","ws"),e=t.wire=new o.WebSocket(n);return e.onclose=function(){o.mesh.bye(t),c(t)},e.onerror=function(n){c(t)},e.onopen=function(){o.mesh.hi(t)},e.onmessage=function(n){n&&o.mesh.hear(n.data||n,t)},e}catch(t){}}function c(t){clearTimeout(t.defer),u&&t.retry<=0||(t.retry=(t.retry||o.retry||60)-1,t.defer=setTimeout((function n(){if(u&&u.hidden)return setTimeout(n,2e3);s(t)}),2e3))}}))}))(a,"./adapters/websocket")}()}).call(this,e(0),e(4)(t),e(5).setImmediate)},function(t,n){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,n,e){(function(t){var o=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function r(t,n){this._id=t,this._clearFn=n}n.setTimeout=function(){return new r(i.call(setTimeout,o,arguments),clearTimeout)},n.setInterval=function(){return new r(i.call(setInterval,o,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(o,this._id)},n.enroll=function(t,n){clearTimeout(t._idleTimeoutId),t._idleTimeout=n},n.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},n._unrefActive=n.active=function(t){clearTimeout(t._idleTimeoutId);var n=t._idleTimeout;n>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),n))},e(6),n.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,n.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,e(0))},function(t,n,e){(function(t,n){!function(t,e){"use strict";if(!t.setImmediate){var o,i,r,a,u,s=1,c={},f=!1,l=t.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(t);p=p&&p.setTimeout?p:t,"[object process]"==={}.toString.call(t.process)?o=function(t){n.nextTick((function(){h(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var n=!0,e=t.onmessage;return t.onmessage=function(){n=!1},t.postMessage("","*"),t.onmessage=e,n}}()?t.MessageChannel?((r=new MessageChannel).port1.onmessage=function(t){h(t.data)},o=function(t){r.port2.postMessage(t)}):l&&"onreadystatechange"in l.createElement("script")?(i=l.documentElement,o=function(t){var n=l.createElement("script");n.onreadystatechange=function(){h(t),n.onreadystatechange=null,i.removeChild(n),n=null},i.appendChild(n)}):o=function(t){setTimeout(h,0,t)}:(a="setImmediate$"+Math.random()+"$",u=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(a)&&h(+n.data.slice(a.length))},t.addEventListener?t.addEventListener("message",u,!1):t.attachEvent("onmessage",u),o=function(n){t.postMessage(a+n,"*")}),p.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var n=new Array(arguments.length-1),e=0;e<n.length;e++)n[e]=arguments[e+1];var i={callback:t,args:n};return c[s]=i,o(s),s++},p.clearImmediate=d}function d(t){delete c[t]}function h(t){if(f)setTimeout(h,0,t);else{var n=c[t];if(n){f=!0;try{!function(t){var n=t.callback,e=t.args;switch(e.length){case 0:n();break;case 1:n(e[0]);break;case 2:n(e[0],e[1]);break;case 3:n(e[0],e[1],e[2]);break;default:n.apply(void 0,e)}}(n)}finally{d(t),f=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,e(0),e(7))},function(t,n){var e,o,i=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(t){if(e===setTimeout)return setTimeout(t,0);if((e===r||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:r}catch(t){e=r}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(t){o=a}}();var s,c=[],f=!1,l=-1;function p(){f&&s&&(f=!1,s.length?c=s.concat(c):l=-1,c.length&&d())}function d(){if(!f){var t=u(p);f=!0;for(var n=c.length;n;){for(s=c,c=[];++l<n;)s&&s[l].run();l=-1,n=c.length}s=null,f=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(n){try{return o.call(null,t)}catch(n){return o.call(this,t)}}}(t)}}function h(t,n){this.fun=t,this.array=n}function g(){}i.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)n[e-1]=arguments[e];c.push(new h(t,n)),1!==c.length||f||u(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,n){function e(t){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}e.keys=function(){return[]},e.resolve=e,t.exports=e,e.id=8},function(t,n,e){},function(t,n,e){"use strict";function o(){}e.r(n);function i(t){return t()}function r(){return Object.create(null)}function a(t){t.forEach(i)}function u(t){return"function"==typeof t}function s(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}new Set;function c(t,n){t.appendChild(n)}function f(t,n,e){t.insertBefore(n,e||null)}function l(t){t.parentNode.removeChild(t)}function p(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function h(){return d(" ")}function g(t,n,e,o){return t.addEventListener(n,e,o),()=>t.removeEventListener(n,e,o)}function m(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}let v;function y(t){v=t}const b=[],k=[],_=[],x=[],w=Promise.resolve();let $=!1;function j(){$||($=!0,w.then(O))}function T(t){_.push(t)}const S=new Set;function O(){do{for(;b.length;){const t=b.shift();y(t),I(t.$$)}for(;k.length;)k.pop()();for(let t=0;t<_.length;t+=1){const n=_[t];S.has(n)||(S.add(n),n())}_.length=0}while(b.length);for(;x.length;)x.pop()();$=!1,S.clear()}function I(t){if(null!==t.fragment){t.update(),a(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(T)}}const G=new Set;let D;function M(t,n){t&&t.i&&(G.delete(t),t.i(n))}function N(t,n,e,o){if(t&&t.o){if(G.has(t))return;G.add(t),D.c.push(()=>{G.delete(t),o&&(e&&t.d(1),o())}),t.o(n)}}"undefined"!=typeof window?window:global;new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]);let A;function E(t,n,e){const{fragment:o,on_mount:r,on_destroy:s,after_update:c}=t.$$;o&&o.m(n,e),T(()=>{const n=r.map(i).filter(u);s?s.push(...n):a(n),t.$$.on_mount=[]}),c.forEach(T)}function P(t,n){const e=t.$$;null!==e.fragment&&(a(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function J(t,n,e,i,u,s,c=[-1]){const f=v;y(t);const l=n.props||{},p=t.$$={fragment:null,ctx:null,props:s,update:o,not_equal:u,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:r(),dirty:c};let d=!1;var h;p.ctx=e?e(t,l,(n,e,...o)=>{const i=o.length?o[0]:e;return p.ctx&&u(p.ctx[n],p.ctx[n]=i)&&(p.bound[n]&&p.bound[n](i),d&&function(t,n){-1===t.$$.dirty[0]&&(b.push(t),j(),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}(t,n)),e}):[],p.update(),d=!0,a(p.before_update),p.fragment=!!i&&i(p.ctx),n.target&&(n.hydrate?p.fragment&&p.fragment.l((h=n.target,Array.from(h.childNodes))):p.fragment&&p.fragment.c(),n.intro&&M(t.$$.fragment),E(t,n.target,n.anchor),O()),y(f)}"function"==typeof HTMLElement&&(A=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,n,e){this[t]=e}$destroy(){P(this,1),this.$destroy=o}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(){}});class C{$destroy(){P(this,1),this.$destroy=o}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(){}}var F=e(1),L=e.n(F);e(9);function q(t,n,e){const o=t.slice();return o[1]=n[e],o}function W(t){let n,e,o,i;return{c(){n=p("div"),e=p("img"),i=h(),e.src!==(o=t[1])&&m(e,"src",o),m(e,"alt","Dummy Image"),m(e,"class","masonry-content svelte-jxvw0m"),m(n,"class","masonry-item svelte-jxvw0m")},m(t,o){f(t,n,o),c(n,e),c(n,i)},p(t,n){1&n&&e.src!==(o=t[1])&&m(e,"src",o)},d(t){t&&l(n)}}}function H(t){let n,e,i=t[0],r=[];for(let n=0;n<i.length;n+=1)r[n]=W(q(t,i,n));return{c(){n=p("div"),e=p("div");for(let t=0;t<r.length;t+=1)r[t].c();m(e,"class","masonry svelte-jxvw0m"),m(n,"class","masonry-wrapper svelte-jxvw0m")},m(t,o){f(t,n,o),c(n,e);for(let t=0;t<r.length;t+=1)r[t].m(e,null)},p(t,[n]){if(1&n){let o;for(i=t[0],o=0;o<i.length;o+=1){const a=q(t,i,o);r[o]?r[o].p(a,n):(r[o]=W(a),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=i.length}},i:o,o:o,d(t){t&&l(n),function(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}(r,t)}}}function U(t,n,e){let{data:o}=n;return t.$set=t=>{"data"in t&&e(0,o=t.data)},[o]}var B=class extends C{constructor(t){super(),J(this,t,U,H,s,{data:0})}};function R(t){let n,e,o,i,r;const a=new B({props:{data:t[0]}});return{c(){var t;n=p("input"),e=p("br"),o=h(),(t=a.$$.fragment)&&t.c(),m(n,"type","file")},m(u,s){f(u,n,s),f(u,e,s),f(u,o,s),E(a,u,s),i=!0,r=g(n,"change",t[1])},p(t,[n]){const e={};1&n&&(e.data=t[0]),a.$set(e)},i(t){i||(M(a.$$.fragment,t),i=!0)},o(t){N(a.$$.fragment,t),i=!1},d(t){t&&l(n),t&&l(e),t&&l(o),P(a,t),r()}}}function z(t,n,e){let o=[],i=function(t){for(var n="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=e.length,i=0;i<t;i++)n+=e.charAt(Math.floor(Math.random()*o));return n}(10);console.log(i);var r=L()(["https://gun-matrix.herokuapp.com/gun", "https://www.raygun.live/gun", "https://gunmeetingserver.herokuapp.com/gun", "https://e2eec.herokuapp.com/gun", "https://dletta.rig.airfaas.com/gun", "https://gun-us.herokuapp.com/gun", "https://gun-eu.herokuapp.com/gun", "https://gunjs.herokuapp.com/gun"]),a=r.get("marvel/"+location.hash.slice(1));return console.log(a),a.map().on((t,n)=>{o.push(t),e(0,o)}),[o,function(){document.querySelector("img");const t=document.querySelector("input[type=file]").files[0],n=new FileReader;n.addEventListener("load",()=>{r.get("marvel/"+location.hash.slice(1)).get(i).put(n.result)},!1),t&&n.readAsDataURL(t)}]}const K=new class extends C{constructor(t){super(),J(this,t,z,R,s,{})}}({target:document.body,props:{name:"world"}});window.app=K;n.default=K}]);
